{% extends '../base.html' %}
{% load static form_tags %}

{% block extra_header %}
{% include '../includes/datatable.html' %}    
{% endblock extra_header %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/table_setup.css' %}">
{% endblock css %}
    
{% block page_title %}Inventory Count{% endblock page_title %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
    <li class="breadcrumb-item"><a href="{% url 'inventory_count' %}">Inventory Count</a></li>
    <li class="breadcrumb-item active">Detail</li>
{% endblock breadcrumb %}

{% block main_content %}
<div class="card m-4">
    <div class="card-header">
        <p><span class="text-muted">Description:</span> {{ report.description }}</p>
        <div class="row">
            <div class="col-6">
                <div><span class="text-muted">Inventory Date:</span> {{ report.inventory_date }}</div>
                <div><span class="text-muted">Overall Status:</span> {{ report.overall_status }}</div>
            </div>
            <div class="col-6">
                <div><span class="text-muted">Generated By:</span> {{ report.generated_by }}</div>
                <div><span class="text-muted">Created At:</span> {{ report.created_at }}</div>
            </div>
        </div>
        {% if report.overall_status != "Completed" %}
        <div class="text-right">
            <a href="{% url 'inventory_count_edit' report.pk %}" class="btn btn-warning">Edit Inventory Count Detail</a>
        </div>
        {% endif %}
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                <h4>Store Count</h4>
                <p>Status: {{ report.store_count_status }}</p>
            </div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                <h4>Warehouse Count</h4>
                <p>Status: {{ report.warehouse_count_status }}</p>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Cycle #1</div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                {%if report.store_cycle_1 %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=store&cycle=1">{{ report.store_cycle_1 }}</a>
                {%else%}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=store&cycle=1" class="btn btn-success">Start</a>
                {%endif%}
            </div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                {%if report.warehouse_cycle_1 %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=warehouse&cycle=1">{{ report.warehouse_cycle_1 }}</a>
                {%else%}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=warehouse&cycle=1" class="btn btn-success">Start</a>
                {%endif%}
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Cycle #2</div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                {%if report.store_cycle_2 %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=store&cycle=2">{{ report.store_cycle_2 }}</a>
                {%elif report.last_store_cycle == 1 and not report.was_store_count_completed %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=store&cycle=2" class="btn btn-success">Start</a>
                {%else%}
                -
                {%endif%}
            </div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                {%if report.warehouse_cycle_2 %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=warehouse&cycle=2">{{ report.warehouse_cycle_2 }}</a>
                {%elif report.last_warehouse_cycle == 1 and not report.was_warehouse_count_completed %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=warehouse&cycle=2" class="btn btn-success">Start</a>
                {%else%}
                -
                {%endif%}
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Cycle #3</div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                {%if report.store_cycle_3 %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=store&cycle=3">{{ report.store_cycle_3 }}</a>
                {%elif report.last_store_cycle == 2 and not report.was_store_count_completed %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=store&cycle=3" class="btn btn-success">Start</a>
                {%else%}
                -
                {%endif%}
            </div>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                {%if report.warehouse_cycle_3 %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=warehouse&cycle=3">{{ report.warehouse_cycle_3 }}</a>
                {%elif report.last_warehouse_cycle == 2 and not report.was_warehouse_count_completed %}
                <a href="{% url 'show_inventory_cycle' report.pk %}?location=warehouse&cycle=3" class="btn btn-success">Start</a>
                {%else%}
                -
                {%endif%}
            </div>
        </div>
    </div>
</div>
{% endblock main_content %}


{% block js %}
    <script>
        $(document).ready(function() {
            $("#menu_trans").addClass("menu-open")
            $("#menu_inv_count").addClass("active")
        })
    </script>
{% endblock js %}